# 转码设置

阿里云视频点播为您提供转码功能，您可以根据业务需求，选择和配置对应的转码模板，对视频进行转码处理。

## 功能介绍

视频上传完成后，进入转码处理阶段。您可以根据业务需要，选择普通转码或不转码。

-   普通转码：可根据需求选择不同的封装格式和清晰度将视频转码播放，适用于长视频。

    当前可用清晰度包括流畅、标清、高清、超清、原画（转封装）、2K、4K 、高音质、普通音质等。您可对不同清晰度进行码率、分辨率、格式等自定义设置，同时使用转码模版组进行不同转码模版的分组及管理。

    如果您是新客户，推荐您使用**TranscodeTemplateGroup**（系统内置）模版组。系统内置模版组内置了常见的清晰度、对应的码率、分辨率等参数，您可以快捷设置格式、水印及加密。

-   不转码：直接将原片作为视频流进行播放，适用于短视频的特殊视频处理方式。

    使用此模板，点播会自动将原片进行分发，并写入视频流信息，方便用户在使用GetPlayInfo获取播放信息接口时，返回原片的地址进行播放该模板常用于短视频、直播转点播录制等场景，用户可直接播放原片。

    点播服务开通后，默认使用**不转码**（系统内置）模版组。


**说明：**

-   转码服务均为收费项，具体请参见[收费标准](https://www.aliyun.com/price/product?spm=5176.2020520107.0.0.719a83833KlNbP#/vod/detail)。
-   您如果选择清晰度为**原画**，视频将保持原始清晰度和码率，仅更新视频文件的封装格式，适合无需调整视频尺寸或码率的业务场景。此外，如果您采用了**不转码**，您的视频加速地址将归类为**原画**。
-   实际计费规格由分辨率宽高决定，和转码模板清晰度可能会不一致。

## 操作步骤

1.  登录[视频点播控制台](https://vod.console.aliyun.com/)。

2.  在点播控制台左侧导航栏的**配置管理**区域。

3.  单击**媒体处理配置** \> **转码模板组**，进入转码模板组页面。

    服务开通后，默认使用**不转码**（系统内置）模版组，自带**TranscodeTemplateGroup**（系统内置）模版组。

    ![转码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0739006061/p172491.png)

4.  单击**添加转码模板组**进入添加转码模板组页面。

    当**不转码**和**TranscodeTemplateGroup**模板组，无法满足您的需求时，您可以操作该步骤添加所需要的模板组。

    ![转码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0739006061/p174476.png)

5.  单击**设为默认**设置默认模板组。

    ![设为默认](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0739006061/p174513.png)

    您可以单击**查看**查看模板组的配置，也可以单击**编辑**修改配置。当您不需要模板组时，单击**删除**，删除模板组。


## 添加转码模板组

服务开通后，默认使用系统内置模版组，且配置中仅有标清的HLS和MP4两种视频格式。

**说明：** 系统内置模版组内添加模板时，分辨率和码率不可修改，默认按流畅（640 x 360）、标清（960 x 540）、高清（1280x720）、超清（1920x1080）、和原画进行设置。

用户自定义模板组，普通转码模板添加。

![转码模板](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9063155061/p182466.png)

转码模板的参数如下表所示。

|序号|参数分类|参数名称|描述|
|--|----|----|--|
|①|基本参数|封装格式|-   视频支持：HLS、MP4、FLV。
-   音频支持：MP3。

各种封装格式的具体介绍，请参见[基本概念](/cn.zh-CN/产品简介/基本概念.md)。 |
|清晰度|-   清晰度：流畅、标清、高清、超清、2K、4K、原画（转封装）。
-   音质：普通音质、高音质。 |
|②|视频参数|禁用视频|禁用视频后，转码后输出流不包含视频（常用于提取一路输出作为音频，如电台场景）。|
|编码格式|目前支持H.264、H.265。|
|码率|码率输入范围10~50000（Kbps），区分清晰度控制，建议按照各清晰度推荐码率设置。|
|分辨率|分辨率宽高输入范围128~4096（Px），宽或高可只设置其中一项，另一边则按原始尺寸缩放。|
|帧率|每秒显示帧数，建议按照各清晰度推荐帧率设置。|
|关键帧最大间隔|一个 GOP 内的帧数，建议使用各清晰度推荐设置。|
|水印设置|对视频进行加水印处理，需要在水印设置中添加素材并开启水印后生效。更多信息，请参见[视频水印](/cn.zh-CN/控制台指南/配置管理/水印管理.md)。|
|③|音频参数|禁用音频|禁用音频后，转码后输出流不包含音频，如果需要输出画面无声音，可勾选此项。|
|编码格式|目前HLS和MP4封装格式支持AAC、MP3，MP3封装格式支持MP3。|
|采样率|建议使用推荐设置。|
|码率|音频码率输入范围8~1000（Kbps），建议使用推荐设置。|
|声道数|建议使用推荐设置。|
|④|高级参数（当封装格式为HLS时存在）|分片时长|每个ts分片的时长，建议使用推荐设置。|
|HLS加密|目前可对HLS格式进行加密设置，选择加密后，需要集成官方支持视频解密的播放SDK版本完成播放。此服务试用期间免费。**说明：** 此处配置的加密为私有加密，如果要使用标准加密，具体接口，请参见[提交媒体转码作业](/cn.zh-CN/服务端API/媒体处理/发起处理/提交媒体转码作业.md)。 |
|⑤|条件转码参数|检查视频分辨率|检查输入分辨率是否小于转码模板设定的分辨率。|
|检查视频码率|检查视频输入码率是否小于转码模板设定的码率。|
|检查音频码率|检查音频输入码率是否小于转码模板设定的码率。|

**说明：**

-   转码格式修改仅对新上传的视频有效。
-   为避免转码失败，不要在转码任务进行时对模版或模版组进行编辑或删除操作。

不同清晰度，推荐使用的码率、分辨率及设置区间如下表所示。

|清晰度|推荐码率|推荐分辨率|分辨率区间|
|---|----|-----|-----|
|流畅|400|640x360|128x128~640x360|
|标清|900|960x540|641x361~960x540|
|高清|1500|1280x720|961x541~1280x720|
|超清|3000|1920x1080|1281x721~1920x1080|
|2K|3500|2560x1440|1920x1080 ~2560x1440|
|4K|6000|2560x1440|2560x1440 ~ 3840x2160|

窄带高清TM1.0，基于阿里云独家转码技术，对视频中每个场景、动作、内容、纹理等进行智能分析，保证相同视频画质下，码率更低，一定程度上降低带宽成本。

点播预置了多种窄带高清清晰度，支持MP4、FLV、HLS格式，具体参数如下表所示。

|清晰度|码率范围|分辨率-宽|
|---|----|-----|
|流畅|≤400|640|
|标清|≤800|848|
|高清|≤1500|1280|
|超清|≤3000|1920|
|2K|≤4000|2048|
|4K|≤8000|3840|

