# 图片叠加

本文为您介绍图片叠加的参数说明和全程叠加、指定区域叠加的示例，以图片叠加场景Timeline的各种数据组织举例。

## 简介

视频剪辑的简介、总体流程和媒体合成服务的两种使用方式已在[概述](/cn.zh-CN/开发指南/云剪辑/概述.md)中介绍过，媒体合成最终都是通过[视频合成](/cn.zh-CN/服务端API/视频剪辑(云剪辑)/视频合成.md)接口发起并实现的，而Timeline是该服务重点处理的数据，也是视频剪辑中最核心的对象。Timeline内部参数可以组织成多种形式，以应对不同的业务场景。

## 参数说明

|参数|说明|
|--|--|
|图片出现的坐标|-   X：图片左上角距离输出视频左上角的横向距离。
-   Y：图片左上角距离输出视频左上角的纵向距离。

支持百分比和像素两种形式：-   当取值为\[**0～0.9999**\]时，表示相对输出视频宽/高的占比（X相对宽，Y相对高\)。
-   当取值为≥8的整数时，表示绝对像素。 |
|图片在输出视频中所占的大小|-   Width：图片在输出视频中的宽度。
-   Height：图片在输出视频中的宽度。

支持百分比和像素两种形式：-   当取值为\[**0～0.9999**\]时，表示相对输出视频宽/高的占比（Width相对宽，Height相对高\)。
-   当取值为≥8的整数时，表示绝对像素。 |
|图片在输出视频叠加的时间区间|-   TimelineIn：图片相对于时间线的入点。
-   TimelineOut：图片相对于时间线的出点。 |

## 全程叠加示例

全程叠加指从片头到片尾叠加图片，即视频全程叠加图片不需要指定`TimelineIn`和`TimelineOut`。图片在输出视频中出现的位置由`X`和`Y`设定，在输出视频中的宽高由`Width`和`Height`设定。示例如下：

-   单视频叠加

    ```
    {
      "VideoTracks": [
          {
              "VideoTrackClips": [
                  {
                      "MediaId": "222d9296e8864746a0b6f32dad6e****"
                  }
              ]
          }
      ],
      "ImageTracks": [
          {
              "ImageTrackClips": [
                  {
                      "ImageId": "001d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.1234,
                      "Y": 0.1234
                  },
                  {
                      "ImageId": "002d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.7234,
                      "Y": 0.7234
                  }
              ]
          }
      ]
    }
    ```

-   多视频叠加

    ```
    {
      "VideoTracks": [
          {
              "VideoTrackClips": [
                  {
                      "MediaId": "222d9296e8864746a0b6f32dad6e****"
                  },
                  {
                      "MediaId": "333d9296e8864746a0b6f32dad6e****"
                  }
              ]
          }
      ],
      "ImageTracks": [
          {
              "ImageTrackClips": [
                  {
                      "ImageId": "001d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.1234,
                      "Y": 0.1234
                  },
                  {
                      "ImageId": "002d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.7234,
                      "Y": 0.7234
                  }
              ]
          }
      ]
    }
    ```


## 指定区域叠加示例

指定区域叠加指图片叠加在视频的指定时间区间。图片在输出视频中出现的位置由`X`和`Y`设定，在输出视频中的宽高由`Width`和`Height`设定。在一个视频的第2秒~100秒叠加2张图片，示例如下：

**说明：** 输出视频指最终合成的成片视频。

-   单视频叠加

    -   当`TimelineIn`不设置时，默认从0开始。
    -   当`TimelineOut`不设置时，默认到视频的尾部。
    -   当`TimelineOut`超过视频尾部（对单视频来说，即视频时长）时，超过的时间区间自动被忽略，仍以视频轨的尾部为准。
    ```
    {
      "VideoTracks": [
          {
              "VideoTrackClips": [
                  {
                      "MediaId": "222d9296e8864746a0b6f32dad6e****"
                  }
              ]
          }
      ],
      "ImageTracks": [
          {
              "ImageTrackClips": [
                  {
                      "ImageId": "001d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.1234,
                      "Y": 0.1234,
                      "TimelineIn":2,
                      "TimelineOut":100
                  },
                  {
                      "ImageId": "002d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.7234,
                      "Y": 0.7234,
                      "TimelineIn":2,
                      "TimelineOut":100
                  }
              ]
          }
      ]
    }
    ```

-   多视频叠加图片

    -   当`TimelineIn`不设置时，默认从0开始。
    -   当`TimelineOut`不设置时，默认到视频的尾部。
    -   当`TimelineOut`超过视频尾部（对多个视频来说，即视频轨总体时长）时，超过的时间区间，视频画面为黑场。
    如果视频轨有多个不同分辨率的源视频，那么：

    -   输出视频的宽取多个源视频宽的最大值。
    -   输出视频的高取多个源视频高的最大值。
    -   画面采用pad+scale的方式，先加黑边保证实际画面比例不变形，再等比例放大到输出视频的宽高。
    -   输出视频的时长为视频轨的时长。
    ```
    {
      "VideoTracks": [
          {
              "VideoTrackClips": [
                  {
                      "MediaId": "222d9296e8864746a0b6f32dad6e****"
                  },
                  {
                      "MediaId": "333d9296e8864746a0b6f32dad6e****"
                  }
              ]
          }
      ],
      "ImageTracks": [
          {
              "ImageTrackClips": [
                  {
                      "ImageId": "001d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.1234,
                      "Y": 0.1234,
                      "TimelineIn":2,
                      "TimelineOut":100
                  },
                  {
                      "ImageId": "002d9296e8864746a0b6f32dad6e****",
                      "Width": 0.1345,
                      "Height": 0.1678,
                      "X": 0.7234,
                      "Y": 0.7234,
                      "TimelineIn":2,
                      "TimelineOut":100
                  }
              ]
          }
      ]
    }
    ```


