概述 
=======================

视频点播支持将直播流同步录制为点播视频，并支持媒资管理、媒体处理（转码、内容审核、智能封面等AI处理）、内容制作（云剪辑）、CDN分发加速等一系列操作。您可通过控制台配置工作流自动处理，也可通过API/SDK灵活触发。本文为您介绍直播转点播的整体架构、优势、接入方式和查询方式。

整体架构 
-------------------------

直播转点播的整体架构如下：![整体架构](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8230326061/p183806.png)

直转点优势 
--------------------------

比起传统的录制到用户存储，录制到点播系统具有以下优势：

* 一站式的视频生产：录制到点播同时支持自动转码+CDN分发等，提供一站式视频生产流程。

  

* 丰富的媒资管理：点播以视频维度进行录制视频管理，提供丰富的媒资管理方式，便于扩展。

  

* 强大的内容制作能力：利用点播的云剪辑等能力，可对录制的视频进行在线云剪辑，免去传统的制作流程。

  

* 视频AI等媒体处理：基于强大的AI能力，对视频进行智能审核、智能封面、视频DNA等处理。

  




接入方式 
-------------------------

视频直播服务将直播内容进行录制存储，并转入点播系统中进行管理。

在一个直播加速域名下，直播录制配置按直播推流的`AppName`和`StreamName`进行区分，即相同`AppName`和`StreamName`下的视频流（Stream）都按此`AppName`和`StreamName`下的录制配置进行录制。 

1. 开通视频点播服务。具体操作，请参见[开始使用视频点播](/cn.zh-CN/快速入门/开始使用视频点播.md)。

   

2. 在点播控制台的[添加转码模板组](https://vod.console.aliyun.com/#/settings/transcode/add)页面，创建所需要的转码模板，用于直播录制后的视频内容处理。更多信息，请参见[转码模板](/cn.zh-CN/开发指南/媒体处理/音视频转码.md)。

   

3. 开通视频直播服务。具体操作，请参见[服务开通](/cn.zh-CN/快速入门/服务开通.md)。

   

4. 在直播控制台的[域名管理](https://live.console.aliyun.com//domain/list#/domain/list)页面，添加录制配置，在录制转码模板中选择刚才创建的模板进行关联。具体操作，请参见[直播录制存储至VOD](/cn.zh-CN/用户指南/录制管理/录制存储至VOD/直播录制存储至VOD.md)。

   也可通过调用[添加直播录制转点播配置](/cn.zh-CN/API参考/直播录制存储至VOD/AddLiveRecordVodConfig.md)接口，添加录制配置。
   **说明**

   合成模板相关问题，请参见[常见问题FAQ](/cn.zh-CN/开发指南/直播转点播/录制配置.md)。
   

5. 完成上述配置工作后，配置好的直播流在接入时便会按照模板进行录制。

   **说明**

   为了避免录制时，因网络抖动或临时断流而导致录制文件被异常截断，系统会延迟断流180s。即如果断流之后在180s内重新推流，系统会默认是同一路录制流；超过180s则认为是两路录制流。
   




查询方式 
-------------------------

直播录制到点播后，点播会将内容以视频维度进行管理，并且提供丰富的媒资处理能力。用户可以通过如下方式获取到录制的视频列表。

* 控制台查看

  * 在点播控制台的[音/视频](https://vod.console.aliyun.com/?/media/video/list#/media/video/list)页面，视频来源选择 **直播录制** 进行筛选查询。![查询列表](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9230326061/p183815.png)

    
  
  * 在直播控制台的[录制文件管理](https://live.console.aliyun.com/#/live/record)处，根据AppName与StreamName进行查询。![筛选](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9230326061/p183816.png)

    
  

  

* 录制回调

  点播系统会在直播录制时候进行回调通知，用户可以通过接收[直转点视频录制完成](/cn.zh-CN/开发指南/事件通知/事件列表/直转点视频录制完成.md)事件回调信息，获取新增的录制视频。
  

* 接口查询

  点播提供了查询接口，用户可调用[获取直转点视频列表](/cn.zh-CN/服务端API/直播转点播/获取直转点视频列表.md)接口，根据域名、`AppName`和`StreamName`来获取所需要的视频列表。
  



