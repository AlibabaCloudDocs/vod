视频动图 
=========================



简介 
-----------------------

动态图片（Dynamic Image）是指一组特定的静态图像以指定的频率切换而产生某种动态效果的图片。网络上常见的表现形式是gif动图，其次是webp。两者各有优缺点，用户可根据实际需要进行选择。

视频截动图，是对指定视频中的一个区间进行内容截取，并生成动图文件。
**注意**



* 纯音频且无任何图像信息流的媒体文件、源文件损坏或源文件封装信息异常，则可能无法生成截图文件。

  

* 截动图的过程是完全异步的，可接收 [视频动图完成](https://help.aliyun.com/document_detail/143490.html)消息获取视频动图完成情况。

  

* 截动图耗时与文件的大小、时长以及动图截取时长有关。

  

* 视频截动图，会产生一定的费用，请知晓。具体收费详情参考[普通转码收费详情](https://www.aliyun.com/price/product?spm=a2c4g.11186623.2.16.6ad476f3AVLuN7#/vod/detail)。

  




格式说明 
-------------------------

视频动图目前支持 gif、webp。

* gif 动图

  




Gif动图的特点：兼容性好，经常用来作网页装饰用。

* webp 动图

  




webp动图的特点：文件体积相比GIF小很多，但缺点是部分浏览器不兼容。

使用方式 
-------------------------

* API截动图

  




视频截动图，通过提交截动图作业接口发起对指定视频的截动图任务，详细请参考 [提交媒体动图作业](https://help.aliyun.com/document_detail/141417.html)。

* 工作流截动图

  




目前 **点播控制台** -\> **配置管理** -\> **媒体处理配置** -\> **工作流管理** 中已支持视频动图作业。

![视频动图](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4517097951/p136459.png)

动图获取 
-------------------------

目前，视频点播支持通过以下两种方式获取视频的动图信息。

* 通过接收 [视频动图完成](https://help.aliyun.com/document_detail/143490.html) 回调消息获取动图信息（ **推荐** ）。

  

* 视频动图完成后，可以通过[查询动图列表](/cn.zh-CN/服务端API/媒资管理/动图管理/查询动图列表.md) 接口来获取视频的动图信息。

  



**说明**

如果将动图设置为封面，可以通过 [获取视频信息](/cn.zh-CN/服务端API/媒资管理/音视频管理/获取视频信息.md) 接口获取封面动图链接。

动图模板 
-------------------------

动图涉及到的参数相对较多，如果将动图参数都统一在提交动图任务时传入，不仅提高了动图功能接入门槛，更降低了易用性。因此视频点播提供了动图模板，用户可先将相关参数配置成动图模板，在发起动图任务时指定动图模板ID即可。

* API管理

  




点播提供动图模板管理接口，详情参考 [动图模板管理](https://help.aliyun.com/document_detail/141406.html) 接口。

* 控制台管理

  




为方便用户管理与快速有效的实现动图任务，目前点播控制台已支持动图模板管理。具体如下： **点播控制台** -\> **配置管理** -\> **媒体处理配置** -\> **动图模板** 。

![动图模板](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4517097951/p136475.png)![动图模板创建](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4517097951/p136551.png)

动图参数 
-------------------------

此处只介绍动图配置的部分参数使用细节，更多参数详情请参考[动图模板配置信息](/cn.zh-CN/服务端API/附录/基本数据类型.md)。

* 动图画面配置 Video

  




**Width** ：动图的宽。单位：像素。取值范围:\[128,4096\]

**Height** ：动图的高。单位：像素。取值范围:\[128,4096\]

**Fps** ：动图的帧率。取值范围：(0,60\]

* 动图裁剪时间线配置 TimeSpan

  




**Seek** ：视频裁剪的开始时间。

**Duration** ：视频裁剪的持续时长。

**End** ：视频裁剪需要丢弃的尾部时长。
**说明**



* TimeSpan配置参数遵循以下格式

  * 格式1：sssss\[.SSS\]。取值范围［0.000，86399.999\]
    示例：12000.556

    
  
  * 格式2：hh:mm:ss\[.SSS\]。取值范围：\[00:00:00.000,23:59:59.999\]
    示例：00:00:05.003

    
  

  




<!-- -->

* **Seek** 必填， **Duration** 和 **End** 选填一个，如果两者都填，则以 **End** 为准。

  



