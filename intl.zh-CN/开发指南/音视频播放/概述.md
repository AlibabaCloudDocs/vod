概述 
=======================

视频点播支持播放音频和视频文件，您可以通过控制台预览、集成阿里云播放器SDK和集成第三方播放器进行播放。本文为您介绍音视频播放的整体流程、准备工作、前提条件、播放方式、播放地址和播放安全。

简介 
-----------------------

视频点播（VOD）支持音频和视频文件的播放，文件来源包括：

* 选择 **转码** 方式上传的文件经转码处理后产生的输出流文件；

  

* 选择 **不转码** 方式上传的文件作为原画用于播放。

  




您可以通过以下三种方式对音视频文件进行播放：

* [点播控制台](https://vod.console.aliyun.com/#/media/video/list)预览，具体操作，请参见[媒资管理](/intl.zh-CN/控制台指南/媒资库/媒资管理.md)；

  

* 集成阿里云播放器SDK，更多信息，请参见[播放器SDK产品说明](/intl.zh-CN/播放器SDK/产品说明.md)；

  

* 集成第三方播放器。

  




您可以通过以下两种方式获取播放地址：

* 直接获取：通过查看转码完成后的事件通知，或调用[获取视频播放地址](/intl.zh-CN/服务端API/音视频播放/获取视频播放地址.md)接口。

  

* 通过播放凭证自动换取：使用阿里云播放器SDK，可调用[获取视频播放凭证](/intl.zh-CN/服务端API/音视频播放/获取视频播放凭证.md)接口来获取播放凭证，阿里云播放器SDK通过播放凭证自动换取播放地址进行播放。

  




准备工作 
-------------------------

* 配置加速域名：请确保启用的点播域名进行过域名备案。更多信息，请参见[域名准入标准](/intl.zh-CN/控制台指南/域名管理/域名准入标准.md)。

  

* 域名CNAME解析：请确保域名完成了CNAME绑定，否则无法播放。CNAME绑定请参见 [阿里云（原万网）解析配置CNAME流程](/intl.zh-CN/控制台指南/域名管理/配置CNAME/阿里云（原万网）解析配置CNAME流程.md)，同时也支持[新网](/intl.zh-CN/控制台指南/域名管理/配置CNAME/新网配置CNAME流程.md)和[DNSPod](/intl.zh-CN/控制台指南/域名管理/配置CNAME/DNSPod配置CNAME流程.md)的域名接入。

  

* 确认转码配置：视频点播支持对上传至点播的媒体文件做 **转码** 和 **不转码** 处理，请参见[音视频转码](/intl.zh-CN/开发指南/媒体处理/音视频转码.md)。

  

* 确认安全配置：视频点播支持多种对视频内容的保护机制，包括 **访问限制** **、播放中心鉴权** 、 **业务方二次鉴权** 、 **视频加密** 及 **安全下载** ，视频是否可播放受限制于以上几种安全配置，请参见[视频安全](/intl.zh-CN/开发指南/视频安全/概述.md)。

  




播放前提 
-------------------------

* **视频状态** 

  音视频在生产、处理和分发等流程中，状态会发生迁移和变更，其状态也是决定视频播放的关键条件。视频状态定义请参见[视频状态 Status](/intl.zh-CN/服务端API/附录/基本数据类型.md)，详细变更规则如下：
  * 有转码![转码状态变更 ](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8173826061/p178262.png)

    
  
  * 不转码![不转码状态变更 ](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9820926061/p178263.png)

    
  

  

* **判断条件** 

  * 只有状态为 **正常** （`Status`字段值为 **Normal** ）的视频才能正常播放，即通过点播API/SDK能获取到播放地址。

    
  
  * 当状态为 **审核** 中或 **屏蔽** （`Status`字段值分别为 **Checking** 、 **Blocked** ）时，视频只能在控制台播放，或是通过安全IP进行播放。您可以通过点播API/SDK来设置[审核安全IP](/intl.zh-CN/开发指南/媒体审核/审核安全IP.md)。

    
  

  

* **判断方式** 

  用户上传视频完成后，并不代表视频已准备就绪，还需点播服务端确认接收完成，可根据 **事件通知** 来确定上传的视频何时能播放。
  * 对于不转码的视频(或音频) 接收到[视频上传完成](/intl.zh-CN/开发指南/事件通知/事件列表/视频上传完成.md)事件通知后即可进行播放，此时可通过调用[获取视频播放地址](/intl.zh-CN/服务端API/音视频播放/获取视频播放地址.md)接口获取到播放地址。

    
  
  * 对于转码的视频，接收到[单个清晰度转码完成](/intl.zh-CN/开发指南/事件通知/事件列表/单个清晰度转码完成.md)事件通知后即可进行播放，若要确保所有清晰度都能获取到，可接收到[视频转码完成](/intl.zh-CN/开发指南/事件通知/事件列表/视频转码完成.md)再处理。

    
  

  




播放方式 
-------------------------

* 点播控制台预览

  * 在控制台的 **[音](https://vod.console.aliyun.com/#/media/video/list)** **[/视频](https://vod.console.aliyun.com/#/media/video/list)** 页面选择视频进行预览，优先播放加密流。

    
  
  * 在控制台的 **音/视频\>管理\>视频地址** 页面选择某路流进行预览。为了保障您的视频安全，目前仅支持非加密流预览。

    
  

  




<!-- -->

* 集成阿里云播放器SDK

  * 您可以从服务端获取播放凭证，回传给客户端进行播放，好处在于安全性较高。更多信息，请参见[通过播放凭证播放](/intl.zh-CN/开发指南/音视频播放/通过播放凭证播放.md)。

    
  
  * 目前阿里云播放器支持直接使用播放地址进行播放，可以将获取到的播放地址直接传递给播放器进行播放。更多信息，请参见[获取播放地址播放](/intl.zh-CN/开发指南/音视频播放/获取播放地址播放.md)。

    
  

  




<!-- -->

* 集成第三方播放器

  * 您可以集成第三方播放器[获取播放地址播放](/intl.zh-CN/开发指南/音视频播放/获取播放地址播放.md)。

    
  
  * 获取到播放地址后，传递给自主播放器进行播放，方式比较灵活，但需要自己实现清晰度切换、异常处理等开发工作。

    
  

  




播放地址 
-------------------------

* 配置加速域名

  在点播控制台配置加速域名后，视频播放地址为CDN文件地址，可在点播控制台的 **音/视频\>管理\>视频地址** 页面查看，分为固定和动态两种，取决于是否在域名管理里开启了URL鉴权开关，开启和配置，请参见[URL鉴权](/intl.zh-CN/开发指南/视频安全/URL鉴权.md)。
  * 固定地址

    适用于安全性要求低的场景，地址永久有效，即关闭鉴权开关后不含鉴权信息的地址(URL中的`auth_key`参数值即为鉴权信息)。目前控制台添加域名后鉴权开关默认为关闭。
    
  
  * 动态地址

    适用于安全性要求高的场景，地址动态生成，一定时间后过期。动态地址的默认有效时间为您在URL鉴权里配置的`默认有效时长`，同时您也可以在[生成播放地址](/intl.zh-CN/开发指南/视频安全/URL鉴权.md)或[获取视频播放地址](/intl.zh-CN/服务端API/音视频播放/获取视频播放地址.md)时设置过期时间；若地址过期则访问时CDN会返回`HTTP 403`。

    动态地址示例：

        http://vod.example.com/video/aliyun-sample.mp4?auth_key=1500523200-0-0-80cd3862d699b7118eed99103f2a3a4f

    
    **说明**

    示例中的auth_key参数值前缀1500523200（时间为2017-07-20 12:00:00），且 **默认有效时长** 设置为60分钟，则表示该地址会在2017-07-20 13:00:00过期。
    
  

  




<!-- -->

* 未配置加速域名

  * 未配置加速域名时，返回的播放地址为OSS文件地址，此时无法使用URL鉴权，但会默认生成OSS鉴权信息，请参见[OSS-在URL中包含签名](/intl.zh-CN/API 参考/访问控制/在URL中包含签名.md)。此时，通过播放调用[获取视频播放地址](/intl.zh-CN/服务端API/音视频播放/获取视频播放地址.md)接口获取播放地址时，仍可使用`AuthTimeout`参数指定视频OSS地址的过期时间，但无法根据AccessKey自定义鉴权信息。

    
  
  * 如您在控制台的 **[存储管理](https://vod.console.aliyun.com/#/storage/list)** 页面设置了存储`Bucket`为 **公共读** ，则可忽略OSS鉴权信息（具体操作，请参见[存储管理](/intl.zh-CN/控制台指南/配置管理/存储管理.md)），此时地址为永久有效，但有被盗链、非法下载的风险，故存储`Bucket`应尽量设置为 **私有** 。

    
  

  




更多播放地址的常见设置，请参见[播放常见设置](/intl.zh-CN/开发指南/音视频播放/播放常见设置.md)。

播放安全（限制播放和下载） 
----------------------------------

* 视频安全

  为了保护您的视频内容，视频点播提供了多种安全保障方式，包括：[访问限制](/intl.zh-CN/开发指南/视频安全/访问限制.md)、[URL鉴权](/intl.zh-CN/开发指南/视频安全/URL鉴权.md) 、视频加密（[阿里云视频加密](/intl.zh-CN/开发指南/视频安全/阿里云视频加密.md)和[HLS标准加密](/intl.zh-CN/开发指南/视频安全/HLS标准加密.md)）。更多信息，请参见[视频安全概述](/intl.zh-CN/开发指南/视频安全/概述.md)。
  

* 账号安全

  为了保证安全，请不要将主账号或RAM用户AK放在客户端（特别是Web端）来访问点播服务。更多信息，请参见[账号和授权概述](/intl.zh-CN/开发指南/账号和授权/概述.md)。
  



