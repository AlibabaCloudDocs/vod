# 配置Range回源

为提升资源响应时间，减少回源流量消耗，您可以阅读本文配置Range回源。

## 注意事项

Range回源是指客户端通知源站服务器只返回指定范围内的部分内容，有利于音视频等较大文件的内容分发。

配置Range回源的注意事项如下：

-   配置Range回源之前，需要源站支持Range请求，即HTTP请求头中包含Range字段，并且源站能够响应正确的206文件分片。
-   Range回源是可选配置项，CDN控制台默认不开启。

## 操作步骤

1.  登录[视频点播控制台](https://vod.console.aliyun.com/)。

2.  在点播控制台左侧导航栏的**配置管理**区域。

3.  单击**分发加速配置** \> **域名管理**，进入域名管理页面。

4.  选择您要配置的域名，单击**配置**。

    ![配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1277415061/p180549.png)

5.  单击**视频相关**，选择**Range回源**，单击**修改配置**。

    **说明：** 默认为开启Range回源。

    ![Range回源](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7681325061/p181795.png)

6.  选择Range回源配置，单击**确定**完成配置。

    ![开启Range](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7681325061/p181969.png)

    |Range回源设置|具体描述|示例|
    |:--------|:---|:-|
    |**开启**|当您需要访问资源文件指定范围内的部分内容时，为了提高资源响应效率，则需要开启Range回源。开启Range请求回源后，源站需要依据Range，响应文件的字节范围，同时CDN节点也会向客户端响应相应字节范围的内容。|如果客户端向CDN的请求中含有`range:0-100`，则源站收到的请求中也会含有`range:0-100`。源站响应CDN节点，CDN节点响应客户端字节范围为0~100，共101个字节。|
    |**关闭**|当您需要访问资源文件的全部内容时，则需要关闭Range回源。关闭Range回源后，CDN上层节点会向源站请求全部的文件，由于客户端收到Range定义的字节后自动断开HTTP连接，请求的文件没有缓存到CDN节点上，最终导致缓存命中率较低，并且回源流量较大。|如果客户端向CDN请求中含有`range:0-100`，则源站端收到的请求中没有Range这个参数。源站响应CDN节点完整文件，CDN节点响应给客户端的就是101个字节，由于链接断开，会导致该文件没有缓存到CDN节点上。|
    |**强制**|参数请求强制回源站。|当选择**Range回源**为**强制**，请确保源站支持参数Range。 **说明：** 您指定Range回源为强制后，任何分片请求都会强制分片回源。 |


