# 过滤参数

如果您的URL请求中携带英文问号（?）和参数，可以开启过滤参数功能，有效提高文件缓存命中率，提升分发效率。本文为您详细介绍配置过滤参数的方法。

## 功能说明

阿里云CDN的过滤参数功能可分为保留参数和过滤参数，具体说明如下：

-   过滤参数

    每个URL都缓存不同的副本在CDN节点上。

    关闭过滤参数后，访问URL需精确匹配英文问号（?）之后的参数，提高请求的精确性。例如：第一次访问`http://www.abc.com/1.jpg`，CDN没有缓存，直接回源访问数据。第二次访问`http://www.abc.com/1.jpg?test1`，由于关闭了过滤参数，所以英文问号（?）后的参数需精确匹配，即无法响应CDN缓存内容`http://www.abc.com/1.jpg`，需要重新回源获取`http://www.abc.com/1.jpg?test1`。

-   保留参数

    在大部分URL请求中会包含参数，但是参数内容优先级不高，可以设置忽略参数浏览文件，开启后可以有效提高文件缓存命中率，提升分发效率。

    如果参数有重要含义，例如，包含文件版本信息等，则推荐您设置为保留过滤参数。您最多可以设置10个保留参数，如果请求URL中包含您设置的保留参数，则会携带该参数回源。

    开启过滤参数的作用是忽略URL请求中英文问号（?）之后的参数，提高CDN缓存的命中率。例如：第一次访问`http://www.abc.com/1.jpg`，CDN没有缓存，直接回源访问数据。第二次访问`http://www.abc.com/1.jpg?test1`，由于开启了过滤参数，所以英文问号（?）后的参数无需匹配，即可命中CDN缓存`http://www.abc.com/1.jpg`。


## 操作步骤

1.  登录[视频点播控制台](https://vod.console.aliyun.com/)。

2.  在点播控制台左侧导航栏选择**配置管理**。

3.  单击**分发加速配置** \> **域名管理**，进入域名管理页面。

4.  选择您要配置的域名，单击**配置**。

    ![配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1277415061/p180549.png)

5.  单击**性能优化**。

6.  单击**修改配置**。

    ![过滤参数](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1277415061/p181763.png)

7.  配置**过滤参数**和**保留参数**。

    ![配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1277415061/p181765.png)

    配置项和说明如下表所示。

    |配置项|说明|
    |---|--|
    |**过滤参数**|过滤参数开关。打开过滤参数开关后，资源回源时会去除URL中英文问号（?）之后的参数，提高文件缓存命中率。|
    |**保留参数**|配置需要保留的参数。最多可以配置10个保留参数，用半角逗号（,）作分隔符 。例如：`http://www.abc.com/a.jpg?x`，**保留参数**配置为`x`。|

8.  单击**确定**。


